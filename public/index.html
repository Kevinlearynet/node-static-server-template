<!DOCTYPE html>
<html lang="en" style="background:none;">
<head>
	<meta charset="UTF-8">
	<title>Segment UI Prototype</title>
	<link rel="stylesheet" href="/dist/style.css">
</head>
<body style="background:none; border-top:none;">
<div class="container">
	<h1>Segment Builder</h1>
	<p class="lead">Create an manage custom segment rules for your audience(s).</p>
		
	<form id="rulesetEditForm" rv-class="data.formClass">

		<!-- ANY or ALL -->
		<div class="filter-row">
			<div class="switch-wrapper">
				<input id="any-all" type="checkbox" value="1">
			</div>
		</div>

		<div class="ruleset-container">

			<!-- TEMPLATE: Parent ruleset -->
			<div class="ruleset" rv-data-id="rule.id" rv-data-operator="rule.operator" rv-each-rule="data.rules">
				<div class="sep">
					<span rv-if="data.matchTypeAll">and</span>
					<span rv-if="data.matchTypeAny">or</span>
				</div>

				<div class="bar">
					<span class="field">
						<select class="small" rv-if="data.fields.ruleType" data-rule-type="rule-type">
							<option>Rule types&hellip;</option>
							<optgroup rv-each-group="data.fields.ruleType" rv-label="group.name">
								<option rv-each-option="group.options" rv-value="rule.ruleType">{ option.label }</option>
							</optgroup>
						</select>
					</span>

					<span class="field">
						<select class="small" rv-name="rule.operator">
							<option rv-value="contains">contains</option>
							<option rv-value="exactly">exactly</option>
							<option rv-value="regexp">RegExp</option>
						</select>
					</span>

					<span class="field">
						<input type="text" placeholder="Enter value" rv-value="rule.param">
					</span>

					<span class="button add">
						<button rv-on-click="data.handlers.addChild">
							<i class="ion-android-add-circle"></i>
							<em rv-if="data.matchTypeAny">and</em>
							<em rv-if="data.matchTypeAll">or</em>
						</button>
					</span>
				</div>

				<span class="button remove">
					<button rv-on-click="data.handlers.removeParent">
						<i class="ion-android-remove-circle"></i>
					</button>
				</span>

				<!-- Child rules -->
				<div class="ruleset child" rv-data-parent-id="rule.id" rv-data-id="child.id" rv-data-type="child.type" rv-data-operator="child.operator" rv-each-child="rule.children">
					<div class="sep">
						<i class="ion-funnel"></i>
						<span rv-if="data.matchTypeAny">and</span>
						<span rv-if="data.matchTypeAll">or</span>
					</div>

					<div class="bar">
						<span class="field">
							<select class="small" rv-if="data.fields.ruleType" data-rule-type="rule-type">
								<option>Rule types&hellip;</option>
								<optgroup rv-each-group="data.fields.ruleType" rv-label="group.name">
									<option rv-each-option="group.options" rv-value="child.ruleType">{ option.label }</option>
								</optgroup>
							</select>
						</span>

						<span class="field">
							<select class="small" rv-name="child.operator">
								<option rv-value="contains">contains</option>
								<option rv-value="exactly">exactly</option>
								<option rv-value="regexp">RegExp</option>
							</select>
						</span>

						<span class="field">
							<input type="text" name="rule_value" placeholder="Enter value" rv-value="child.value">
						</span>
					</div>

					<span class="button remove">
						<button rv-on-click="data.handlers.removeChild">
							<i class="ion-android-remove-circle"></i>
						</button>
					</span>
				</div>
			</div>

			<!-- Add parent rule -->
			<div class="add-ruleset">
				<div class="bar">
					<span class="button add">
						<button rv-on-click="data.handlers.addParent">
							<i class="ion-android-add-circle"></i>
							<em>New Rule</em>
						</button>
					</span>
				</div>
			</div>
		</div>

	</form>

	<h2>Save Segment</h2>
	<form id="editSegmentForm" style="margin-top: 0;">
		<p><input type="text" placeholder="Name your segment"></p>
		<p>
			<label style="width:auto; padding-right:10px;">Status:</label>
			<span class="option">
				<input type="checkbox">
				<label class="inline">Active</label>

				<input type="checkbox">
				<label class="inline">Backend</label>

				<input type="checkbox">
				<label class="inline">Dashboard Display</label>

				<input type="checkbox">
				<label class="inline">Home Display</label>
			</span>
		</p>
		<p class="submit">
			<input type="submit" value="Save &amp; Add More" style="background:green" class="btn-primary">
			<input type="submit" value="Save &amp; Continue" style="background:rgba(0,0,0,0.1)" class="btn-secondary">
		</p>
	</form>
</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/watch/2.0.3/jquery.watch.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/rivets/0.8.1/rivets.bundled.min.js"></script>
<script src="/assets/jquery.switchButton.js"></script>
<script src="/dist/interaction.js"></script>

</body>
</html>